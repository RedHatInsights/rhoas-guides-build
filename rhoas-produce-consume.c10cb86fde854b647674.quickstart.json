{"apiVersion":"console.openshift.io/v1","kind":"QuickStarts","metadata":{"name":"producing-consuming-cli","annotations":{"draft":false,"order":3},"labels":{"service-category/application-services":"true","product/rhosak":"true","technology":"cli"}},"spec":{"version":0.1,"type":{"text":"Quick Start","color":"green"},"displayName":"Producing and consuming messages by using the OpenShift Application Services CLI","durationMinutes":10,"icon":"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI1LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAzNyAzNyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzcgMzc7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojRUUwMDAwO30KCS5zdDF7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPGc+Cgk8cGF0aCBkPSJNMjcuNSwwLjVoLTE4Yy00Ljk3LDAtOSw0LjAzLTksOXYxOGMwLDQuOTcsNC4wMyw5LDksOWgxOGM0Ljk3LDAsOS00LjAzLDktOXYtMThDMzYuNSw0LjUzLDMyLjQ3LDAuNSwyNy41LDAuNUwyNy41LDAuNXoiCgkJLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xNi41LDE4LjEyYy0xLjcyLDAtMy4xMi0xLjQtMy4xMi0zLjEyczEuNC0zLjEyLDMuMTItMy4xMnMzLjEyLDEuNCwzLjEyLDMuMTJTMTguMjIsMTguMTIsMTYuNSwxOC4xMnoKCQkgTTE2LjUsMTMuMTJjLTEuMDMsMC0xLjg4LDAuODQtMS44OCwxLjg4czAuODQsMS44OCwxLjg4LDEuODhzMS44OC0wLjg0LDEuODgtMS44OFMxNy41MywxMy4xMiwxNi41LDEzLjEyeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTEyLjk0LDExLjA2bC0yLTJjLTAuMDgtMC4wOC0wLjE4LTAuMTMtMC4yOS0wLjE1Yy0wLjAzLTAuMDEtMC4wNS0wLjAxLTAuMDctMC4wMQoJCWMtMC4xMS0wLjAxLTAuMjItMC4wMS0wLjMyLDAuMDNjMCwwLDAsMCwwLDBjLTAuMDcsMC4wMy0wLjEzLDAuMDctMC4xOCwwLjEyYy0wLjAxLDAuMDEtMC4wMSwwLjAxLTAuMDIsMC4wMWwtMiwyCgkJYy0wLjI0LDAuMjQtMC4yNCwwLjY0LDAsMC44OGMwLjEyLDAuMTIsMC4yOCwwLjE4LDAuNDQsMC4xOHMwLjMyLTAuMDYsMC40NC0wLjE4bDAuOTMtMC45M1YyMi41YzAsMC4zNSwwLjI4LDAuNjIsMC42MiwwLjYyCgkJczAuNjItMC4yOCwwLjYyLTAuNjJWMTEuMDFsMC45MywwLjkzYzAuMjQsMC4yNCwwLjY0LDAuMjQsMC44OCwwQzEzLjE5LDExLjcsMTMuMTksMTEuMywxMi45NCwxMS4wNnoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMi41LDE4LjEyYy0wLjM0LDAtMC42Mi0wLjI4LTAuNjItMC42MnYtNWMwLTAuMzUsMC4yOC0wLjYyLDAuNjItMC42MnMwLjYyLDAuMjgsMC42MiwwLjYydjUKCQlDMjMuMTIsMTcuODUsMjIuODQsMTguMTIsMjIuNSwxOC4xMnoiLz4KCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yMC41LDI1LjEyYy0xLjcyLDAtMy4xMi0xLjQtMy4xMi0zLjEyczEuNC0zLjEyLDMuMTItMy4xMnMzLjEyLDEuNCwzLjEyLDMuMTJTMjIuMjIsMjUuMTIsMjAuNSwyNS4xMnoKCQkgTTIwLjUsMjAuMTJjLTEuMDMsMC0xLjg4LDAuODQtMS44OCwxLjg4czAuODQsMS44OCwxLjg4LDEuODhzMS44OC0wLjg0LDEuODgtMS44OFMyMS41MywyMC4xMiwyMC41LDIwLjEyeiIvPgoJPHBhdGggY2xhc3M9InN0MSIgZD0iTTI4Ljk0LDI1LjA2Yy0wLjI0LTAuMjQtMC42NC0wLjI0LTAuODgsMGwtMC45MywwLjkzVjEyLjVjMC0wLjM1LTAuMjgtMC42Mi0wLjYyLTAuNjJzLTAuNjIsMC4yOC0wLjYyLDAuNjIKCQl2MTMuNDlsLTAuOTMtMC45M2MtMC4yNC0wLjI0LTAuNjQtMC4yNC0wLjg4LDBjLTAuMjQsMC4yNC0wLjI0LDAuNjQsMCwwLjg4bDIsMmMwLjA2LDAuMDYsMC4xMywwLjExLDAuMjEsMC4xNAoJCWMwLjA4LDAuMDMsMC4xNiwwLjA1LDAuMjQsMC4wNWMwLjA4LDAsMC4xNi0wLjAyLDAuMjQtMC4wNWMwLDAsMCwwLDAsMGMwLjA3LTAuMDMsMC4xMy0wLjA3LDAuMTgtMC4xMgoJCWMwLjAxLTAuMDEsMC4wMS0wLjAxLDAuMDItMC4wMWwyLTJDMjkuMTksMjUuNywyOS4xOSwyNS4zLDI4Ljk0LDI1LjA2eiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTE0LjUsMjUuMTJjLTAuMzQsMC0wLjYyLTAuMjgtMC42Mi0wLjYydi01YzAtMC4zNSwwLjI4LTAuNjIsMC42Mi0wLjYyczAuNjIsMC4yOCwwLjYyLDAuNjJ2NQoJCUMxNS4xMiwyNC44NSwxNC44NCwyNS4xMiwxNC41LDI1LjEyeiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTI2LjUsMTguMTJjLTAuMzQsMC0wLjYyLTAuMjgtMC42Mi0wLjYydi01YzAtMC4zNSwwLjI4LTAuNjIsMC42Mi0wLjYyczAuNjIsMC4yOCwwLjYyLDAuNjJ2NQoJCUMyNy4xMiwxNy44NSwyNi44NCwxOC4xMiwyNi41LDE4LjEyeiIvPgoJPHBhdGggY2xhc3M9InN0MCIgZD0iTTEwLjUsMjUuMTJjLTAuMzQsMC0wLjYyLTAuMjgtMC42Mi0wLjYydi01YzAtMC4zNSwwLjI4LTAuNjIsMC42Mi0wLjYyczAuNjIsMC4yOCwwLjYyLDAuNjJ2NQoJCUMxMS4xMiwyNC44NSwxMC44NCwyNS4xMiwxMC41LDI1LjEyeiIvPgo8L2c+Cjwvc3ZnPgo=","description":"<div id=\"description\" class=\"exampleblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>Use the Red Hat OpenShift Application Services (rhoas) CLI to produce and consume messages for a Kafka instance.</p>\n</div>\n</div>\n</div>","prerequisites":["A running Kafka instance (see <a href=\"https://console.redhat.com/application-services/learning-resources?quickstart=getting-started\">Getting started with OpenShift Streams for Apache Kafka</a>)","A command-line terminal application","The latest version of the rhoas CLI (see <a href=\"https://access.redhat.com/documentation/en-us/red_hat_openshift_application_services/1/guide/bb30ee92-9e0a-4fd6-a67f-aed8910d7da3\">Installing and configuring the rhoas CLI</a>)"],"introduction":"<div id=\"introduction\" class=\"exampleblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>Welcome to the quick start for producing and consuming Kafka messages using the <code>rhoas</code> command-line interface (CLI).</p>\n</div>\n<div class=\"paragraph\">\n<p>In this quick start, you&#8217;ll use a CLI command to produce messages to different topic partitions in a Kafka instance. You&#8217;ll then use the Red Hat OpenShift Streams for Apache Kafka web console to inspect the messages. When you&#8217;re ready, you&#8217;ll use another CLI command to consume the messages.</p>\n</div>\n</div>\n</div>","tasks":["<div class=\"sect1\">\n<h2 id=\"proc-creating-kafka-topic-for-cli-production-consumption_produce-consume-rhoas-cli\">Creating a Kafka topic in OpenShift Streams for Apache Kafka</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph _abstract\">\n<p>In this task, you&#8217;ll create a new topic in your Kafka instance. You&#8217;ll use this topic in later tasks to produce and consume messages.</p>\n</div>\n<div class=\"ulist\"><div class=\"title\">Prerequisites</div><div class=\"task-pflist\"><h6 data-ouia-component-type=\"PF4/Title\" data-ouia-safe=\"true\" data-ouia-component-id=\"OUIA-Generated-Title-45\" class=\"pf-c-title pf-m-md task-pflist-title\">Prerequisites</h6><p class=\"task-pflist-subtitle\">In addition to the prerequisites for this quick start, you have completed the following requirements for this step:</p><ul class=\"pf-c-list task-pflist-list task-pflist-list--prereq\"><li class=\"task-pflist-list__item--prereq task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">You&#8217;ve created a Kafka instance in Red Hat OpenShift Streams for Apache Kafka and the instance is in the <strong>Ready</strong> state.</span></li></ul></div></div>\n<div class=\"olist\"><div class=\"title\">Procedure</div><div class=\"task-pflist\"><h6 data-ouia-component-type=\"PF4/Title\" data-ouia-safe=\"true\" data-ouia-component-id=\"OUIA-Generated-Title-46\" class=\"pf-c-title pf-m-md task-pflist-title\">Procedure</h6><ol type=\"1\" class=\"pf-c-list task-pflist-list task-pflist-list--proc\"><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">On the <a href=\"https://console.redhat.com/application-services/streams/\" target=\"_blank\" rel=\"noopener\">Kafka Instances</a> page of the OpenShift Streams for Apache Kafka web console, click the Kafka instance that you want to add a topic to.</span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Select the <strong>Topics</strong> tab.</span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Click <strong>Create topic</strong> and follow the guided steps to define the topic details.<div class=\"openblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>You must specify the following topic properties:</p>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><strong>Topic name</strong>: For this quick start, enter <code>test-topic</code> as the topic name.</p>\n</li>\n<li>\n<p><strong>Partitions</strong>: Set the number of partitions for the topic. For this quick start, set the value to <code>2</code>.</p>\n</li>\n<li>\n<p><strong>Message retention</strong>: Set the message retention time and size. For this quick start, set the retention time to <code>A week</code> and the retention size to <code>Unlimited</code>.</p>\n</li>\n<li>\n<p><strong>Replicas</strong>: For this release of OpenShift Streams for Apache Kafka, replica values are preconfigured. The number of partition replicas for the topic is set to <code>3</code> and the minimum number of follower replicas that must be in sync with a partition leader is set to <code>2</code>. For a trial Kafka instance, the number of replicas and the minimum in-sync replica factor are both set to <code>1</code>.</p>\n</li>\n</ul>\n</div>\n<div class=\"paragraph\">\n<p>After you complete the setup, the new topic appears on the <strong>Topics</strong> page.</p>\n</div>\n</div>\n</div></span></li></ol></div></div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Does <code>test-topic</code> appear on the <strong>Topics</strong> page?</p>\n</li>\n</ul>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-producing-messages_produce-consume-rhoas-cli\">Producing messages to your Kafka instance</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph _abstract\">\n<p>When you have a Kafka instance with a topic, you&#8217;re ready to use the CLI to produce messages. In this task, you&#8217;ll produce four messages to your Kafka instance.</p>\n</div>\n<div class=\"ulist\"><div class=\"title\">Prerequisites</div><div class=\"task-pflist\"><h6 data-ouia-component-type=\"PF4/Title\" data-ouia-safe=\"true\" data-ouia-component-id=\"OUIA-Generated-Title-47\" class=\"pf-c-title pf-m-md task-pflist-title\">Prerequisites</h6><p class=\"task-pflist-subtitle\">In addition to the prerequisites for this quick start, you have completed the following requirements for this step:</p><ul class=\"pf-c-list task-pflist-list task-pflist-list--prereq\"><li class=\"task-pflist-list__item--prereq task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">You&#8217;ve created <code>test-topic</code> on your Kafka instance.</span></li></ul></div></div>\n<div class=\"olist\"><div class=\"title\">Procedure</div><div class=\"task-pflist\"><h6 data-ouia-component-type=\"PF4/Title\" data-ouia-safe=\"true\" data-ouia-component-id=\"OUIA-Generated-Title-48\" class=\"pf-c-title pf-m-md task-pflist-title\">Procedure</h6><ol type=\"1\" class=\"pf-c-list task-pflist-list task-pflist-list--proc\"><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Log in to the <code>rhoas</code> CLI.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ rhoas login</code></pre>\n</div>\n</div></span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Specify the Kafka instance that you want to produce messages to.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ rhoas kafka use --name=<em>&lt;my-kafka-instance&gt;</em></code></pre>\n</div>\n</div></span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Produce your first message to <code>test-topic</code>.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>rhoas kafka topic produce --name=test-topic</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>You&#8217;re prompted to enter a message value.</p>\n</div></span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Enter <code>First message</code> as the message value.</span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Repeat the previous steps to produce your second and third messages to <code>test-topic</code>. Enter <code>Second message</code> and <code>Third message</code> as the message values.</span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Produce your fourth and final message to <code>test-topic</code>. This time, specify a partition value of <code>1</code> and a custom message key. An example is shown below.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>rhoas kafka topic produce --name=test-topic --partition=1 --key=\"{'location': 'us-east-1'}\"</code></pre>\n</div>\n</div></span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Enter <code>Fourth message</code> as the value of the final message.</span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">To view the messages in the Red Hat OpenShift Streams for Apache Kafka <a href=\"https://console.redhat.com/application-services/streams/\" target=\"_blank\" rel=\"noopener\">web console</a>, perform the following actions:<div class=\"olist loweralpha\">\n<ol class=\"loweralpha\" type=\"a\">\n<li>\n<p>On the <strong>Kafka Instances</strong> page, click the name of your Kafka instance.</p>\n</li>\n<li>\n<p>Select the <strong>Topics</strong> tab, and then click <code>test-topic</code>.</p>\n</li>\n<li>\n<p>Select the <strong>Messages</strong> tab.</p>\n<div class=\"paragraph\">\n<p>The messages table shows the messages you produced.</p>\n</div>\n</li>\n<li>\n<p>Observe the following details about the messages you produced:</p>\n<div class=\"ulist\">\n<ul>\n<li>\n<p>Because you didn&#8217;t specify a partition value when producing the first three messages, these messages all went to partition <code>0</code> by default.</p>\n</li>\n<li>\n<p>The three messages on partition <code>0</code> have offset values of <code>0</code>, <code>1</code>, and <code>2</code>.</p>\n</li>\n<li>\n<p>The final message is on partition <code>1</code> and has the custom key value that you specified.</p>\n</li>\n</ul>\n</div>\n</li>\n</ol>\n</div></span></li></ol></div></div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Does the messages table show the four messages that you produced?</p>\n</li>\n</ul>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-consuming-messages_produce-consume-rhoas-cli\">Consuming messages from your Kafka instance</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph _abstract\">\n<p>When you&#8217;ve produced messages to your Kafka instance and verified them using the Red Hat OpenShift Streams for Apache Kafka web console, you&#8217;re ready to consume the messages. In this task, you&#8217;ll use the CLI to consume the messages.</p>\n</div>\n<div class=\"ulist\"><div class=\"title\">Prerequisites</div><div class=\"task-pflist\"><h6 data-ouia-component-type=\"PF4/Title\" data-ouia-safe=\"true\" data-ouia-component-id=\"OUIA-Generated-Title-49\" class=\"pf-c-title pf-m-md task-pflist-title\">Prerequisites</h6><p class=\"task-pflist-subtitle\">In addition to the prerequisites for this quick start, you have completed the following requirements for this step:</p><ul class=\"pf-c-list task-pflist-list task-pflist-list--prereq\"><li class=\"task-pflist-list__item--prereq task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">You&#8217;ve produced messages to <code>test-topic</code> in your Kafka instance.</span></li><li class=\"task-pflist-list__item--prereq task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">You&#8217;re logged in to the <code>rhoas</code> CLI.</span></li></ul></div></div>\n<div class=\"olist\"><div class=\"title\">Procedure</div><div class=\"task-pflist\"><h6 data-ouia-component-type=\"PF4/Title\" data-ouia-safe=\"true\" data-ouia-component-id=\"OUIA-Generated-Title-50\" class=\"pf-c-title pf-m-md task-pflist-title\">Procedure</h6><ol type=\"1\" class=\"pf-c-list task-pflist-list task-pflist-list--proc\"><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Specify the Kafka instance that you want to consume messages from.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ rhoas kafka use --name=<em>&lt;my-kafka-instance&gt;</em></code></pre>\n</div>\n</div></span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Consume the messages on partition <code>0</code> of <code>test-topic</code>.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>rhoas kafka topic consume --name=test-topic --partition=0</code></pre>\n</div>\n</div>\n<div class=\"paragraph\">\n<p>The CLI displays the messages. Observe that because you didn&#8217;t specify an offset value, the CLI displays <strong>all</strong> of the messages on partition <code>0</code>.</p>\n</div></span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Consume the third message that you produced by specifying the appropriate partition and offset values.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>rhoas kafka topic consume --name=test-topic --partition=0 --offset=2</code></pre>\n</div>\n</div></span></li><li class=\"task-pflist-list__item--proc task-pflist-list__item\"><span class=\"task-pflist-list__item__content\">Consume the fourth message, which you produced to partition <code>1</code> of the topic.<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code>rhoas kafka topic consume --name=test-topic --partition=1</code></pre>\n</div>\n</div></span></li></ol></div></div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>When you entered the <code>kafka topic consume</code> command, did you see the expected messages?</p>\n</li>\n</ul>\n</div>\n<div id=\"conclusion\" class=\"exampleblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>Congratulations! You successfully completed the quick start for producing and consuming messages using the <code>rhoas</code> CLI.</p>\n</div>\n</div>\n</div>\n</div>\n</div>"],"conclusion":"<div id=\"conclusion\" class=\"exampleblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>Congratulations! You successfully completed the quick start for producing and consuming messages using the <code>rhoas</code> CLI.</p>\n</div>\n</div>\n</div>"}}