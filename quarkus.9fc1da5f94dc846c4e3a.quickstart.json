{"apiVersion":"console.openshift.io/v1","kind":"QuickStarts","metadata":{"name":"kafkacat"},"spec":{"version":0.1,"type":{"text":"Quick start","color":"green"},"displayName":"Using Quarkus with Kafka instances in Red Hat OpenShift Streams for Apache Kafka","durationMinutes":10,"icon":"","description":"<div id=\"description\" class=\"paragraph\">\n<p>Learn how to use Quarkus to produce messages to and consume messages from a Kafka instance in Red Hat OpenShift Streams for Apache Kafka.</p>\n</div>","prerequisites":["A running Kafka instance (see the Getting Started quick start)","A command-line terminal application","Git","Java","An IDE","Apache Maven"],"introduction":"<div id=\"introduction\" class=\"paragraph\">\n<p>Welcome to the Red Hat OpenShift Streams for Apache Kafka Quarkus quick start. In this quick start, you&#8217;ll learn how to use <a href=\"https://quarkus.io/\">Quarkus</a> to produce messages to and consume messages from your Kafka instances in Red Hat OpenShift Streams for Apache Kafka.</p>\n</div>","tasks":["<div class=\"sect1\">\n<h2 id=\"proc-getting-the-sample-code_using-quarkus\">Getting the same code</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Quarkus is a Kubernetes Native Java stack tailored for OpenJDK HotSpot and GraalVM, crafted from the best of breed Java libraries and standards. Applications built for Quarkus can produce messages to and consume messages to Streams for Apache Kafka using MicroProfile Reactive Messaging.</p>\n</div>\n<div class=\"paragraph\">\n<p>In order to follow this quick start get the sample from GitHub and open it in your IDE.</p>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>On the command line use git to clone the sample.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">$ mkdir guides &amp;&amp; git clone https://github.com/bf2fc6cc711aee1a0c2a/guides .</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>Using your IDE, import the <code>guides/quarkus</code> directory that you created in the previous step.</p>\n</li>\n</ol>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>You have the quarkus project imported into your IDE and the IDE has configured the project with the needed Java libraries from the Maven <code>pom.xml</code>.</p>\n</li>\n</ul>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-configuring-quarkus_using-quarkus\">Configuring your Quarkus application to connect to a Kafka instance</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>To enable your Quarkus application to access a Kafka instance, you must configure the connection using the bootstrap server endpoint and the generated credentials for your Streams for Apache Kafka service account. For Quarkus, you can configure connection information by using the <code>application.properties</code> configuration file. This example sets environment variables and then references them in <code>application.properties</code>.</p>\n</div>\n<div class=\"paragraph\">\n<p>For more information about Quarkus configuration options for using Kafka with MicroProfile Reactive Messaging, see <a href=\"https://quarkus.io/guides/kafka\">the guide</a> in the Quarkus documentation.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>You have the bootstrap server endpoint (external server endpoint) and the generated credentials for your service account. You retrieved this information previously for the Kafka instance in Streams for Apache Kafka by selecting the options menu (three vertical dots), clicking <strong>Connect to instance</strong>, and generating the service account.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>On the command line, enter the following commands to set the Kafka instance bootstrap server and client credentials as environment variables to be used by Quarkus or other applications. Replace the values with your own server and credential information.</p>\n<div class=\"listingblock\">\n<div class=\"title\">Setting environment variables for server and credentials</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>export BOOTSTRAP_SERVER=<em>&lt;bootstrap_server&gt;</em>\nexport CLIENT_ID=<em>&lt;client_id&gt;</em>\nexport CLIENT_SECRET=<em>&lt;client_secret&gt;</em>\nexport OAUTH_TOKEN_ENDPOINT_URI=<em>&lt;oauth_token_endpoint_uri&gt;</em></code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>Review the <code>src/main/resources/application.properties</code> file to understand how the environment variables you set in the previous step are used in your application.</p>\n</li>\n</ol>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-create-prices-topic_using-quarkus\">Create the prices topic</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>This example uses a topic called <code>prices</code></p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>You have created a Kafka instance in the Streams for Apache Kafka web console and the instance is in <strong>Ready</strong> state.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>In the <strong>Streams for Apache Kafka</strong> page of the web console, select the name of the Kafka instance that you want to add a topic to.</p>\n</li>\n<li>\n<p>Click <strong>Create topic</strong> and follow the guided steps to define the topic details. Click <strong>Next</strong> to complete each step and click <strong>Finish</strong> to complete the setup.</p>\n<div class=\"imageblock screencapture\">\n<div class=\"content\">\n<img src=\"./images/sak-create-topic.png\" alt=\"Image of wizard to create a topic\">\n</div>\n<div class=\"title\">Figure 1. Guided steps to define topic details</div>\n</div>\n<div class=\"ulist\">\n<ul>\n<li>\n<p><strong>Topic name</strong>: Enter <code>prices</code> as the topic name.</p>\n</li>\n<li>\n<p><strong>Partitions</strong>: Set the number of partitions for this topic. This example sets the partition to <code>1</code> for a single partition. Partitions are distinct lists of messages within a topic and enable parts of a topic to be distributed over multiple brokers in the cluster. A topic can contain one or more partitions, enabling producer and consumer loads to be scaled.</p>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nYou can increase the number of partitions later, but you cannot decrease them.\n</td>\n</tr>\n</table>\n</div>\n</li>\n<li>\n<p><strong>Message retention</strong>: Set the message retention time to the relevant value and increment. This example sets the retention to <code>7 days</code>. Message retention time is the amount of time that messages are retained in a topic before they are deleted or compacted, depending on the cleanup policy.</p>\n</li>\n</ul>\n</div>\n</li>\n</ol>\n</div>\n<div class=\"paragraph\">\n<p>After you complete the topic setup, the new Kafka topic is listed in the topics table. You can now start producing and consuming messages to and from this topic using the sample Quarkus application that you connect to this instance.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Is the new Kafka topic <code>prices</code> listed in the topics table?</p>\n</li>\n</ul>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-running-the-quarkus-application_using-quarkus\">Running the Quarkus application</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>This example is a small Quarkus application. It has three application scoped beans, one of which generates a random number between 0 and 100 and produces it to a Kafka topic, another that consumes it from the Kafka topic, and a final bean that exposes it as a REST UI (using Server Sent events).</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>You have a running Kafka instance in Streams for Apache Kafka.</p>\n</li>\n<li>\n<p>You have <a href=\"https://github.com/git-guides/\">git</a> installed</p>\n</li>\n<li>\n<p>You have an <a href=\"https://en.wikipedia.org/wiki/Comparison_of_integrated_development_environments#Java\">IDE</a> like <a href=\"https://www.jetbrains.com/idea/download/\">IntelliJ IDEA</a>, <a href=\"https://www.eclipse.org/downloads/\">Eclipse</a>, <a href=\"https://code.visualstudio.com/Download\">VSCode</a> or even <a href=\"https://spacevim.org/use-vim-as-a-java-ide/\">Vim</a> or <a href=\"http://spacemacs.org/\">Emacs</a>!</p>\n</li>\n<li>\n<p>You need a <a href=\"https://adoptopenjdk.net/\">JDK 8 (8u262-b10 or later) or 11+</a> (any distribution)</p>\n</li>\n<li>\n<p>You need <a href=\"https://maven.apache.org/\">Apache Maven 3.6.2+</a></p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>On the command line, enter the following commands to run the application using Quarkus:</p>\n</li>\n</ol>\n</div>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre>$ ./mvnw quarkus:dev</pre>\n</div>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Verification</div>\n<ol class=\"arabic\">\n<li>\n<p>Check that there are no error messages being produced by Quarkus</p>\n</li>\n<li>\n<p>Visit <a href=\"http://localhost:8080/prices.html\" class=\"bare\">http://localhost:8080/prices.html</a> and check that the Last price updates</p>\n</li>\n</ol>\n</div>\n<div id=\"conclusion\" class=\"paragraph\">\n<p>Congratulations! You successfully completed the Streams for Apache Kafka Quarkus quick start, and are now ready to add Streams for Apache Kafka to your own Quarkus application.</p>\n</div>\n</div>\n</div>"],"conclusion":"<div id=\"conclusion\" class=\"paragraph\">\n<p>Congratulations! You successfully completed the Streams for Apache Kafka Quarkus quick start, and are now ready to add Streams for Apache Kafka to your own Quarkus application.</p>\n</div>","nextQuickStart":["service-binding"]}}