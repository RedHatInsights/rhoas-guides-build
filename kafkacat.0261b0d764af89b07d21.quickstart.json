{"apiVersion":"console.openshift.io/v1","kind":"QuickStarts","metadata":{"name":"kafkacat","annotations":{"order":3}},"spec":{"version":0.1,"type":{"text":"Quick start","color":"green"},"displayName":"Using Kafkacat with Kafka instances in Red Hat OpenShift Streams for Apache Kafka","durationMinutes":10,"icon":"","description":"<div id=\"description\" class=\"paragraph\">\n<p>Learn how to use Kafkacat to interact with a Kafka instance in Red Hat OpenShift Streams for Apache Kafka.</p>\n</div>","prerequisites":["A running Kafka instance (see the Getting Started quick start)","A command-line terminal application","JDK 11 or later","For Windows, the latest version of Oracle JDK"],"introduction":"<div id=\"introduction\" class=\"paragraph\">\n<p>Welcome to the quick start for Red Hat OpenShift Streams for Apache Kafka with Kafkacat. In this quick start, you&#8217;ll learn how to use <a href=\"https://github.com/edenhill/kafkacat\" target=\"_blank\" rel=\"noopener\">Kafkacat</a> to produce and consume messages for your Kafka instances in OpenShift Streams for Apache Kafka.</p>\n</div>","tasks":["<div class=\"sect1\">\n<h2 id=\"proc-installing-kafkacat_using-kafkacat\">Installing and verifying Kafkacat</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p><a href=\"https://github.com/edenhill/kafkacat\" target=\"_blank\" rel=\"noopener\">Kafkacat</a> is a command-line utility for messaging in Apache Kafka 0.8 and later. You can install and use Kafkacat to test and debug your Kafka instances in OpenShift Streams for Apache Kafka. With Kafkacat, you can produce and consume messages for your Kafka instances directly from the command line, and list topic and partition information for your Kafka instances.</p>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>In a web browser, go to the <a href=\"https://github.com/edenhill/kafkacat\" target=\"_blank\" rel=\"noopener\">Kafkacat</a> repository in GitHub and follow the installation instructions for your operating system.</p>\n</li>\n<li>\n<p>Verify that the expected version was installed:</p>\n<div class=\"listingblock\">\n<div class=\"title\">Verifying Kafkacat installation</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ kafkacat -V\n\nkafkacat - Apache Kafka producer and consumer tool\nhttps://github.com/edenhill/kafkacat\nCopyright (c) 2014-2019, Magnus Edenhill\nVersion 1.6.0 (JSON, Avro, Transactions, librdkafka 1.6.1 builtin.features=gzip,snappy,ssl,sasl,regex,lz4,sasl_gssapi,sasl_plain,sasl_scram,plugins,zstd,sasl_oauthbearer)</code></pre>\n</div>\n</div>\n</li>\n</ol>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Was Kafkacat installed successfully?</p>\n</li>\n</ul>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-configuring-kafkacat_using-kafkacat\">Configuring Kafkacat to connect to a Kafka instance</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>To enable Kafkacat to access a Kafka instance, configure the connection using the bootstrap server endpoint and the generated credentials for your OpenShift Streams for Apache Kafka service account. For Kafkacat, you can configure connection information either by passing options to the <code>kafkacat</code> command or by using a configuration file. The example in this task sets environment variables and then passes them to the <code>kafkcat</code> command.</p>\n</div>\n<div class=\"paragraph\">\n<p>For more information about Kafkacat configuration options, see <a href=\"https://github.com/edenhill/kafkacat#configuration\" target=\"_blank\" rel=\"noopener\">Configuration</a> in the Kafkacat documentation.</p>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nKafkacat does not yet fully support SASL/OAUTHBEARER authentication, so connecting to a Kafka instance requires only the bootstrap server and the service account credentials for SASL/PLAIN authentication.\n</td>\n</tr>\n</table>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Procedure</div>\n<ul>\n<li>\n<p>On the command line, set the Kafka instance bootstrap server, client credentials, and consumer group ID as environment variables to be used by Kafkacat or other applications. Replace the values with your own server and credential information.</p>\n<div class=\"openblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>The <code>&lt;bootstrap_server&gt;</code> is the bootstrap server endpoint for your service account. The <code>&lt;client_id&gt;</code> and <code>&lt;client_secret&gt;</code> are the generated credentials for your service account. You copied this information previously for the Kafka instance in OpenShift Streams for Apache Kafka by selecting the options menu (three vertical dots) and clicking <strong>Connection</strong>.</p>\n</div>\n<div class=\"paragraph\">\n<p>All consumers with the same group ID belong to the consumer group with that ID.</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Setting environment variables for server and credentials</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ export BOOTSTRAP_SERVER=<em>&lt;bootstrap_server&gt;</em>\n$ export USER=<em>&lt;client_id&gt;</em>\n$ export PASSWORD=<em>&lt;client_secret&gt;</em>\n$ export GROUP_ID=<em>&lt;group_id&gt;</em></code></pre>\n</div>\n</div>\n</div>\n</div>\n</li>\n</ul>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-producing-messages-kafkacat_using-kafkacat\">Producing messages in Kafkacat</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>You can use Kafkacat to produce messages to Kafka topics in several ways, such as reading them from standard input (<code>stdin</code>) directly on the command line or from a file. This example produces messages from input on the command line. For more examples of Kafkacat producer messaging, see the <a href=\"https://github.com/edenhill/kafkacat#examples\" target=\"_blank\" rel=\"noopener\">Examples</a> in the Kafkacat documentation.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>Kafkacat is installed.</p>\n</li>\n<li>\n<p>You have a running Kafka instance in OpenShift Streams for Apache Kafka.</p>\n</li>\n<li>\n<p>You&#8217;ve set the Kafka bootstrap server endpoint and your service account credentials as environment variables.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>On the command line, enter the following commands to start Kafkacat in <em>producer</em> mode. This mode enables you to produce messages to your Kafka topic.</p>\n<div class=\"openblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>This example uses the SASL/PLAIN authentication mechanism with the server and credential environment variables that you set previously. This example produces messages to a topic in OpenShift Streams for Apache Kafka named <code>my-first-kafka-topic</code>. Replace the topic name with the relevant topic as needed. The topic that you use in this command must already exist in OpenShift Streams for Apache Kafka.</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Starting Kafkacat in producer mode</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ kafkacat -t my-first-kafka-topic -b \"$BOOTSTRAP_SERVER\" \\\n -X security.protocol=SASL_SSL -X sasl.mechanisms=PLAIN \\\n -X sasl.username=\"$USER\" \\\n -X sasl.password=\"$PASSWORD\" -P</code></pre>\n</div>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nOpenShift Streams for Apache Kafka also supports the SASL/OAUTHBEARER mechanism for authentication, which is the recommended authentication mechanism to use. However, Kafkacat does not yet fully support OAUTHBEARER, so this example uses SASL/PLAIN.\n</td>\n</tr>\n</table>\n</div>\n</div>\n</div>\n</li>\n<li>\n<p>With Kafkacat running in producer mode, enter messages into Kafkacat that you want to produce to the Kafka topic.</p>\n<div class=\"listingblock\">\n<div class=\"title\">Example messages to produce to the Kafka topic</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>First message\nSecond message\nThird message</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>Keep this producer running to use later when you create a consumer.</p>\n</li>\n</ol>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Is your producer still running without any errors in the terminal?</p>\n</li>\n</ul>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"proc-consuming-messages-kafkacat_using-kafkacat\">Consuming messages in Kafkacat</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>You can use Kafkacat to consume messages from Kafka topics. This example consumes the messages that you sent previously with the producer that you created with Kafkacat.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>Kafkacat is installed.</p>\n</li>\n<li>\n<p>You have a running Kafka instance in OpenShift Streams for Apache Kafka.</p>\n</li>\n<li>\n<p>You&#8217;ve set the Kafka bootstrap server endpoint and your service account credentials as environment variables.</p>\n</li>\n<li>\n<p>You used a producer to produce example messages to a topic.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>On the command line in a separate terminal from your producer, enter the following commands to start Kafkacat in <em>consumer</em> mode. This mode enables you to consume messages from your Kafka topic.</p>\n<div class=\"openblock\">\n<div class=\"content\">\n<div class=\"paragraph\">\n<p>This example uses the SASL/PLAIN authentication mechanism with the server and credential environment variables that you set previously. This example consumes and displays the messages from the <code>my-first-kafka-topic</code> example topic, and states that it reached the end of partition <code>0</code> in the topic.</p>\n</div>\n<div class=\"listingblock\">\n<div class=\"title\">Starting Kafkacat in consumer mode</div>\n<div class=\"content\">\n<pre class=\"highlight\"><code>$ kafkacat -t my-first-kafka-topic -b \"$BOOTSTRAP_SERVER\" \\\n -X security.protocol=SASL_SSL -X sasl.mechanisms=PLAIN \\\n -X sasl.username=\"$USER\" \\\n -X sasl.password=\"$PASSWORD\" -C\n\nFirst message\nSecond message\nThird message\n% Reached end of topic my-first-kafka-topic [0] at offset 3</code></pre>\n</div>\n</div>\n</div>\n</div>\n</li>\n<li>\n<p>If your producer is still running in a separate terminal, continue entering messages in the producer terminal and observe the messages being consumed in the consumer terminal.</p>\n</li>\n</ol>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Verification</div>\n<ul>\n<li>\n<p>Is your consumer running without any errors in the terminal?</p>\n</li>\n<li>\n<p>Did the consumer display the messages from the <code>my-first-kafka-topic</code> example topic?</p>\n</li>\n</ul>\n</div>\n<div id=\"conclusion\" class=\"paragraph\">\n<p>Congratulations! You successfully completed the OpenShift Streams for Apache Kafka Kafkacat quick start, and are now ready to produce and consume messages in the service.</p>\n</div>\n</div>\n</div>"],"conclusion":"<div id=\"conclusion\" class=\"paragraph\">\n<p>Congratulations! You successfully completed the OpenShift Streams for Apache Kafka Kafkacat quick start, and are now ready to produce and consume messages in the service.</p>\n</div>","nextQuickStart":["kafka-bin-scripts","quarkus-kafka"]}}