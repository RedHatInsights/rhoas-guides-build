{"apiVersion":"console.openshift.io/v1","kind":"QuickStarts","metadata":{"name":"quarkus-kafka"},"spec":{"version":0.1,"type":{"text":"Quick start","color":"green"},"displayName":"Using Kafka Bin Scripts with Streams for Apache Kafka","durationMinutes":10,"icon":"","description":"<div id=\"description\" class=\"paragraph\">\n<p>Learn how to use Kafka Bin Scripts to interact with a Streams for Apache Kafka Kafka instance.</p>\n</div>","prerequisites":["A running Kafka instance (see the Getting Started Guide)","A command line/terminal"],"introduction":"<div id=\"introduction\" class=\"paragraph\">\n<p>Welcome to the Streams for Apache Kafka Kafka Bin Scripts Guide.</p>\n</div>","tasks":["<div class=\"sect1\">\n<h2 id=\"task-1_{context}\">Download the Kafka Bin Scripts</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The <em>Kafka Bin Scripts</em> are the binary scripts that are provided in the <a href=\"https://kafka.apache.org/downloads\">Apache Kafka distribution/download</a>. When you extract the Apache Kafka distribution, the <code>bin</code> directory of that distribution contains a set of tools that allow you to interact with your Kafka instance. There are scripts to produce message, consume messages, and to execute various operations against the Kafka APIs to administer topics, consumer-groups, etc.</p>\n</div>\n<div class=\"paragraph\">\n<p>In this Quick Start you will use the Kafka Bin Scripts to produce and consume messages.</p>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nThe Kafka Bin Scripts are part of the open-source community version of Apache Kafka. It&#8217;s not a part of Streams for Apache Kafka and therefore not supported by Red Hat.\n</td>\n</tr>\n</table>\n</div>\n<div class=\"paragraph\">\n<p>If you already have the Kafka Bin Scripts installed on your system, you can continue to the next task of this tutorial.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>tbd</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>Download the latest Kafka distribution from <a href=\"https://kafka.apache.org/downloads\">here</a>.</p>\n</li>\n<li>\n<p>Extract the downloaded archive with your tool of choice.</p>\n</li>\n<li>\n<p>In a terminal, navigate into the Apache Kafka folder. From this folder, navigate into the <code>bin</code> folder.</p>\n</li>\n<li>\n<p>The <code>bin</code> folder contains the Kafka Bin Scripts. Take a look at the scripts inside this folder and verify that you have the <code>kafka-console-producer</code> and <code>kafka-console-consumer</code> scripts.</p>\n</li>\n<li>\n<p>From the <code>bin</code> directory, run <code>kafka-console-producer.sh --version</code> to verify that the scripts can start and run without any problems.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">$ ./kafka-console-producer.sh --version\n2.7.0 (Commit:448719dc99a19793)</code></pre>\n</div>\n</div>\n</li>\n</ol>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Verification</div>\n<ol class=\"arabic\">\n<li>\n<p>Execute <code>kafka-console-producer.sh --version</code> in your terminal. This should print the Kafkas version information.</p>\n</li>\n</ol>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"task-2_{context}\">Create the Configuration File</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>You will need to configure the Kafka Bin Scripts to connect with, and authenticate to, your bf2 Kafka instance.\nThe easiest way to do this is to create a configuration file in the <code>config</code> directory of your Apache Kafka folder.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>Kafka Bin Scripts available on your system.</p>\n</li>\n<li>\n<p>A running bf2 Kafka instance.</p>\n</li>\n<li>\n<p>The bootstrap server location of your Kafka instance.</p>\n</li>\n<li>\n<p>The credentials of the Service Account to authenticate against the Kafka instance.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>Get the credentials (<em>Client ID</em> and <em>Secret</em>) of your Kafka instance. You&#8217;ve created the Service Account in the <em>Getting Started Guide</em>. If you haven&#8217;t created a Service Account yet, or you if you lost the credentials, generate a new set of credentials. This can be done as follows:</p>\n<div class=\"olist loweralpha\">\n<ol class=\"loweralpha\" type=\"a\">\n<li>\n<p>Navigate to the Streams for Apache Kafka environment.</p>\n</li>\n<li>\n<p>In the Kakfa instance table, click on the kebab/three-dot menu icon of your Kafka and select <code>Connect to instance</code>.</p>\n</li>\n<li>\n<p>Click the <em>Generate Credential</em> button.</p>\n</li>\n<li>\n<p>Copu the <em>Client ID</em> and <em>Client Secret</em> and store them in a safe place.</p>\n</li>\n</ol>\n</div>\n</li>\n<li>\n<p>Navigate to the <code>config</code> folder of your Apache Kafka folder.</p>\n</li>\n<li>\n<p>Create a new file. Call it <code>bf2.properties</code>.</p>\n</li>\n<li>\n<p>Add the following content to your configuration file. Use the <em>Client ID</em> as the <em>&lt;USER&gt;</em> and <em>Client Secret</em> as the <em>&lt;PASSWORD&gt;</em></p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-properties\" data-lang=\"properties\">sasl.mechanism=PLAIN\nsecurity.protocol=SASL_SSL\n\nsasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required \\\n  username=\"&lt;USER&gt;\" \\\n  password=\"&lt;PASSWORD&gt;\";</code></pre>\n</div>\n</div>\n<div class=\"admonitionblock note\">\n<table>\n<tr>\n<td class=\"icon\">\n<div class=\"title\">Note</div>\n</td>\n<td class=\"content\">\nStreams for Apache Kafka supports both the SASL/OAUTHBEARER and SASL/PLAIN mechanism for authentication. SASL/OAUTHBEARER is the recommended authentication mechanism to use, and superior to SASL/PLAIN. We highly recommend to always SASL/OAUTHBEARER if your Kafka client or library of choice supports it.\n</td>\n</tr>\n</table>\n</div>\n</li>\n<li>\n<p>Save the file. We will use it in the next task to connect to your Kafka instance and produce messages.</p>\n</li>\n</ol>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Verification</div>\n<ol class=\"arabic\">\n<li>\n<p>You have a new file named bf2.properties in your Apache Kafka&#8217;s <code>config</code> directory</p>\n</li>\n</ol>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"task-3_{context}\">Produce messages</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>The Kafka Bin Scripts contain a script to easily produce message to Apache Kafka from the console/command line/terminal.\nTo prdouce messages from the console/terminal, you simply need to run the <code>kafka-console-producer</code> script.</p>\n</div>\n<div class=\"paragraph\">\n<p>In the previous task, you&#8217;ve created a configuration file with the credentials to connect to your Kafka instance. We will use this configuration file to connect the <code>kafka-console-producer</code> to Kafka.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>Kafka Bin Scripts available on your system.</p>\n</li>\n<li>\n<p>A running bf2 Kafka instance.</p>\n</li>\n<li>\n<p>The bootstrap server location of your Kafka instance.</p>\n</li>\n<li>\n<p>A configuration file containing the authentication information to connect to your Kafka instance.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>Get the Bootstrap Server host and port of your bf2 Kafka instance. In the <em>Getting Started Guide</em> we&#8217;ve explained where you can find this information. To quickly recap:</p>\n<div class=\"olist loweralpha\">\n<ol class=\"loweralpha\" type=\"a\">\n<li>\n<p>Navigate to the Streams for Apache Kafka environment.</p>\n</li>\n<li>\n<p>In the Kakfa instance table, click on the kebab/three-dot menu icon of your Kafka and select <code>Connect to instance</code>.</p>\n</li>\n<li>\n<p>Copy the <em>Bootstrap Server</em> hostname and port to your clipboard.</p>\n</li>\n</ol>\n</div>\n</li>\n<li>\n<p>Start the <code>kafka-console-producer</code> using the following command, replacing the <em>BOOTSTRAP_SERVER</em> with the value for your Kafka instance.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">./kafka-console-producer.sh --topic my-other-topic --bootstrap-server \"$BOOTSTRAP_SERVER\" --producer.config ../config/{Propertyfile_name}</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>If the producer starts correctly, you will see the following prompt.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">&gt;</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>With <code>kafka-console-producer</code> running, you can produce messages by simply typing the message values in your terminal. The following will produce 3 messages to your topic.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">&gt;First message\n&gt;Second message\n&gt;Third message</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>Keep the producer running. We will use this producer again in one of the following tasks.</p>\n</li>\n</ol>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Verification</div>\n<ol class=\"arabic\">\n<li>\n<p>You&#8217;ve a <code>kafka-console-producer</code> running without any errors printed to your console.</p>\n</li>\n<li>\n<p>No errors were printed to the console when you sent the 3 messages.</p>\n</li>\n</ol>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"task-4_{context}\">Consume messages</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Apart from producing messages, the Kafka Bin Scripts can also be used to consume messages.\nTo consume messages from the console/terminal, you simply need to run the <code>kafka-console-consumer</code> script, referencing the same configuration file we created earlier.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>The Kafka Bin Scripts installed on your system.</p>\n</li>\n<li>\n<p>A running bf2 Kafka instance.</p>\n</li>\n<li>\n<p>The bootstrap server location of your Kafka instance.</p>\n</li>\n<li>\n<p>The credentials of the Service Account to authenticate against the Kafka instance.</p>\n</li>\n<li>\n<p>Messages produced to the <code>my-other-topic</code> topic as described in the previous task.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>Using the information from the the previous tasks, like the <em>Bootstrap Server</em> of your bf2 Kafka instance and the configuration file, start the <code>kafka_console_consumer</code>. You will consume messages from the same topic, <code>my-other-topic</code> that you produced messages to in the previous task. Execute the following command, replacing the <em>BOOTSTRAP_SERVER</em> with the value for your Kafka instance. You should see the 3 messages you produced in the previous task.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">$ ./kafka-console-consumer.sh -topic my-other-topic --bootstrap-server \"$BOOTSTRAP_SERVER\" --from-beginning --consumer.config {Propertyfile_name}\nFirst message\nSecond message\nThird message</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>The <code>kafka-console-consumer</code> has consumed the 3 messages you&#8217;ve sent to the topic earlier.</p>\n</li>\n<li>\n<p>Keep the consumer running, as you will use it in the next task.</p>\n</li>\n</ol>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Verification</div>\n<ol class=\"arabic\">\n<li>\n<p>You&#8217;ve a <code>kafka-console-consumer</code> running without any errors printed to your console.</p>\n</li>\n<li>\n<p><code>kafka-console-consumer</code> consumed the 3 messages you&#8217;ve sent to the <code>my-other-topic</code> topic in the previous task.</p>\n</li>\n</ol>\n</div>\n</div>\n</div>","<div class=\"sect1\">\n<h2 id=\"task-5_{context}\">Produce and Consume messages</h2>\n<div class=\"sectionbody\">\n<div class=\"paragraph\">\n<p>Now that you&#8217;ve produced and consumed some messages, and have your <code>kafka-console-producer</code> and <code>kafka-console-consumer</code> still running, we can produce and consume some more messages.</p>\n</div>\n<div class=\"ulist\">\n<div class=\"title\">Prerequisites</div>\n<ul>\n<li>\n<p>A <code>kafka-console-producer</code> running and connected to your bf2 Kafka instance, producing to your <code>my-other-topic</code> topic.</p>\n</li>\n<li>\n<p>A <code>kafka-console-consumer</code> running and connected to your bf2 Kafka instance, consuming from your <code>my-other-topic</code> topic.</p>\n</li>\n</ul>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Procedure</div>\n<ol class=\"arabic\">\n<li>\n<p>In your terminal with the running <code>kafka-console-producer</code>, send the following message.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">My Kafka Bin Scripts messsage</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>Switch to the terminal in which you have your <code>kafka-console-consumer</code> running. You should see your message being consumed.</p>\n<div class=\"listingblock\">\n<div class=\"content\">\n<pre class=\"highlight\"><code class=\"language-bash\" data-lang=\"bash\">First message\nSecond message\nThird message\nMy Kafka Bin Scripts messsage</code></pre>\n</div>\n</div>\n</li>\n<li>\n<p>Produce some more messages to your bf2 Kafka instance and see how they are being consumed by your <code>kafka-console-consumer</code>.</p>\n</li>\n</ol>\n</div>\n<div class=\"olist arabic\">\n<div class=\"title\">Verification</div>\n<ol class=\"arabic\">\n<li>\n<p>You&#8217;ve produced the <em>My Kakfa Bin Scripts message</em> to your <code>my-other-topic</code> Kafka topic without errors.</p>\n</li>\n<li>\n<p>The <em>My Kafka Bin Scripts message</em> was successfully consumed by your <code>kafka-console-consumer</code>.</p>\n</li>\n</ol>\n</div>\n<div id=\"conclusion\" class=\"paragraph\">\n<p>Congratulations! You&#8217;ve successfully completed the Streams for Apache Kafka Kafka Bin Scripts Guide, and are now ready to produce message to, and consume messages from, the service.</p>\n</div>\n</div>\n</div>"],"conclusion":"<div id=\"conclusion\" class=\"paragraph\">\n<p>Congratulations! You&#8217;ve successfully completed the Streams for Apache Kafka Kafka Bin Scripts Guide, and are now ready to produce message to, and consume messages from, the service.</p>\n</div>","nextQuickStart":["todo"]}}